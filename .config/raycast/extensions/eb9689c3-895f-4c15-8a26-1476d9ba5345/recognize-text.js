"use strict";var f=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var U=(t,e)=>{for(var a in e)f(t,a,{get:e[a],enumerable:!0})},B=(t,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of C(e))!k.call(t,r)&&r!==a&&f(t,r,{get:()=>e[r],enumerable:!(o=F(e,r))||o.enumerable});return t};var J=t=>B(f({},"__esModule",{value:!0}),t);var j={};U(j,{default:()=>P});module.exports=J(j);var n=require("@raycast/api");var y=require("@raycast/api"),h=require("path"),S=require("fs/promises"),x=require("child_process");async function E(t,...e){let a=(0,h.join)(y.environment.assetsPath,"compiled_raycast_swift/swift");return await(0,S.chmod)(a,"755"),new Promise((o,r)=>{let c=[t];for(let s of e)try{c.push(JSON.stringify(s,(i,u)=>u===void 0?null:u))}catch(i){r(new g("Failed to serialize input to JSON: "+i.message));return}let l=(0,x.spawn)(a,c),d=[],m=[];l.stdout?.on("data",s=>{d.push(s.toString())}),l.stderr?.on("data",s=>{m.push(s.toString())}),l.on("exit",s=>{if(s===0)try{let i=d.join("").trim();i.length!=0?o(JSON.parse(i)):o(null)}catch(i){let u=new g("Failed to deserialize result from JSON: "+i.message);u.stdout=d.join("").trim(),u.stderr=m.join("").trim(),r(u)}else{let i=new g(m.join("").trim()||d.join("").trim()||"Could not get any data");i.stdout=d.join("").trim(),i.stderr=m.join("").trim(),r(i)}}),l.on("error",s=>{r(s)})})}async function L(t,e,a,o,r,c,l){return await E("recognizeText",t,e,a,o,r,c,l)}var g=class extends Error{constructor(e){super(e),this.name="SwiftError"}};var p=require("@raycast/api");var v=[{title:"\u{1F1FA}\u{1F1F8} English (US)",value:"en-US"},{title:"\u{1F1EB}\u{1F1F7} French (France)",value:"fr-FR"},{title:"\u{1F1EE}\u{1F1F9} Italian (Italy)",value:"it-IT"},{title:"\u{1F1E9}\u{1F1EA} German (Germany)",value:"de-DE"},{title:"\u{1F1EA}\u{1F1F8} Spanish (Spain)",value:"es-ES"},{title:"\u{1F1E7}\u{1F1F7} Portuguese (Brazil)",value:"pt-BR"},{title:"\u{1F1E8}\u{1F1F3} Chinese (Simplified)",value:"zh-Hans"},{title:"\u{1F1F9}\u{1F1FC} Chinese (Traditional)",value:"zh-Hant"},{title:"\u{1F1E8}\u{1F1F3} Cantonese (Simplified)",value:"yue-Hans"},{title:"\u{1F1ED}\u{1F1F0} Cantonese (Traditional)",value:"yue-Hant"},{title:"\u{1F1F0}\u{1F1F7} Korean (South Korea)",value:"ko-KR"},{title:"\u{1F1EF}\u{1F1F5} Japanese (Japan)",value:"ja-JP"},{title:"\u{1F1F7}\u{1F1FA} Russian (Russia)",value:"ru-RU"},{title:"\u{1F1FA}\u{1F1E6} Ukrainian (Ukraine)",value:"uk-UA"},{title:"\u{1F1F9}\u{1F1ED} Thai (Thailand)",value:"th-TH"},{title:"\u{1F1FB}\u{1F1F3} Vietnamese (Vietnam)",value:"vi-VT"}];var w=()=>(0,p.getPreferenceValues)(),T=async()=>{let t=w(),e=await p.LocalStorage.getItem("SelectedLanguages"),a={title:v.find(c=>c.value===t.primaryLanguage)?.title??"\u{1F1FA}\u{1F1F8} English (US)",value:t.primaryLanguage,isDefault:!0},o=[];return typeof e<"u"?(o=JSON.parse(e),o):[a]};var z=async(t=!1)=>{let e=w();try{let a=await T();return await L(t,e.keepImage,e.ocrMode==="fast",e.languageCorrection,e.ignoreLineBreaks,e.customWordsList?e.customWordsList.split(","):[],a.map(r=>r.value))}catch(a){throw console.error(a),new Error("Failed to recognize text")}};async function P(){await(0,n.closeMainWindow)();try{let t=await z();if(!t)return await(0,n.showToast)({style:n.Toast.Style.Failure,title:"No text detected"});await n.Clipboard.copy(t),await(0,n.showToast)({style:n.Toast.Style.Success,title:"Copied text to clipboard"})}catch(t){console.error(t),await(0,n.showToast)({style:n.Toast.Style.Failure,title:"Failed detecting text"})}}
