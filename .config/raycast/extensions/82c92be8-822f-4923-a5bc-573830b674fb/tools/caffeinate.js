"use strict";var u=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var p=(t,e)=>{for(var a in e)u(t,a,{get:e[a],enumerable:!0})},g=(t,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of y(e))!d.call(t,i)&&i!==a&&u(t,i,{get:()=>e[i],enumerable:!(r=l(e,i))||r.enumerable});return t};var m=t=>g(u({},"__esModule",{value:!0}),t);var w={};p(w,{default:()=>h});module.exports=m(w);var n=require("@raycast/api"),s=require("node:child_process");async function f(t,e,a){e&&await(0,n.showHUD)(e),await S({menubar:!1,status:!1});let r=b(a).split(/\s+/).filter(Boolean);(0,s.spawn)("/usr/bin/caffeinate",r,{detached:!0,stdio:"ignore"}).unref(),await c(t,!0)}async function S(t,e){e&&await(0,n.showHUD)(e),(0,s.execSync)("/usr/bin/killall caffeinate || true"),await c(t,!1)}async function c(t,e){t.menubar&&await o("index",{caffeinated:e}),t.status&&await o("status",{caffeinated:e})}async function o(t,e){try{await(0,n.launchCommand)({name:t,type:n.LaunchType.Background,context:e})}catch{}}function b(t){let e=(0,n.getPreferenceValues)(),a=[];e.preventDisplay&&a.push("d"),e.preventDisk&&a.push("m"),e.preventSystem&&a.push("i");let r=[];return a.length>0&&r.push(`-${a.join("")}`),t&&r.push(t),r.join(" ")}async function h(){return await f({menubar:!0,status:!0},void 0,""),"Mac will stay awake until you manually disable it"}
