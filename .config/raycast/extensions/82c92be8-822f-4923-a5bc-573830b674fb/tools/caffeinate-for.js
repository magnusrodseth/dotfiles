"use strict";var i=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=(t,e)=>{for(var n in e)i(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of y(e))!p.call(t,s)&&s!==n&&i(t,s,{get:()=>e[s],enumerable:!(a=d(e,s))||a.enumerable});return t};var h=t=>g(i({},"__esModule",{value:!0}),t);var D={};m(D,{default:()=>S});module.exports=h(D);var r=require("@raycast/api"),u=require("node:child_process");async function c(t,e,n){e&&await(0,r.showHUD)(e),await b({menubar:!1,status:!1});let a=w(n).split(/\s+/).filter(Boolean);(0,u.spawn)("/usr/bin/caffeinate",a,{detached:!0,stdio:"ignore"}).unref(),await f(t,!0)}async function b(t,e){e&&await(0,r.showHUD)(e),(0,u.execSync)("/usr/bin/killall caffeinate || true"),await f(t,!1)}async function f(t,e){t.menubar&&await o("index",{caffeinated:e}),t.status&&await o("status",{caffeinated:e})}async function o(t,e){try{await(0,r.launchCommand)({name:t,type:r.LaunchType.Background,context:e})}catch{}}function w(t){let e=(0,r.getPreferenceValues)(),n=[];e.preventDisplay&&n.push("d"),e.preventDisk&&n.push("m"),e.preventSystem&&n.push("i");let a=[];return n.length>0&&a.push(`-${n.join("")}`),t&&a.push(t),a.join(" ")}async function S(t){let{hours:e=0,minutes:n=0,seconds:a=0}=t;if(e===0&&n===0&&a===0)throw new Error("Please specify a duration");let s=e*3600+n*60+a,l=`${e?`${e}h`:""}${n?`${n}m`:""}${a?`${a}s`:""}`;return await c({menubar:!0,status:!0},void 0,`-t ${s}`),`Mac will stay awake for ${l}`}
