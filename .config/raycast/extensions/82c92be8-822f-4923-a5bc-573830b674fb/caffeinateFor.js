"use strict";var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var h=(t,e)=>{for(var a in e)o(t,a,{get:e[a],enumerable:!0})},S=(t,e,a,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of g(e))!b.call(t,s)&&s!==a&&o(t,s,{get:()=>e[s],enumerable:!(n=p(e,s))||n.enumerable});return t};var w=t=>S(o({},"__esModule",{value:!0}),t);var x={};h(x,{default:()=>m});module.exports=w(x);var u=require("@raycast/api");var r=require("@raycast/api"),i=require("node:child_process");async function c(t,e,a){e&&await(0,r.showHUD)(e),await D({menubar:!1,status:!1});let n=N(a).split(/\s+/).filter(Boolean);(0,i.spawn)("/usr/bin/caffeinate",n,{detached:!0,stdio:"ignore"}).unref(),await l(t,!0)}async function D(t,e){e&&await(0,r.showHUD)(e),(0,i.execSync)("/usr/bin/killall caffeinate || true"),await l(t,!1)}async function l(t,e){t.menubar&&await f("index",{caffeinated:e}),t.status&&await f("status",{caffeinated:e})}async function f(t,e){try{await(0,r.launchCommand)({name:t,type:r.LaunchType.Background,context:e})}catch{}}function N(t){let e=(0,r.getPreferenceValues)(),a=[];e.preventDisplay&&a.push("d"),e.preventDisk&&a.push("m"),e.preventSystem&&a.push("i");let n=[];return a.length>0&&n.push(`-${a.join("")}`),t&&n.push(t),n.join(" ")}async function m(t){let{hours:e,minutes:a,seconds:n}=t.arguments;if(!(e||a||n)){await(0,u.showToast)(u.Toast.Style.Failure,"No values set for caffeinate length");return}if(!((!e||Number.isInteger(Number(e))&&Number(e)>=0)&&(!a||Number.isInteger(Number(a))&&Number(a)>=0)&&(!n||Number.isInteger(Number(n))&&Number(n)>=0))){await(0,u.showToast)(u.Toast.Style.Failure,"Please ensure all arguments are whole numbers");return}let d=Number(e)*3600+Number(a)*60+Number(n),y=`${e?`${e}h`:""}${a?`${a}m`:""}${n?`${n}s`:""}`;await c({menubar:!0,status:!0},`Caffeinating your Mac for ${y}`,`-t ${d}`)}
